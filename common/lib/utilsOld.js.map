{"version":3,"file":"utilsOld.js","names":["getBasePath","reqRoutePath","basePath","first","path_array","split","i","length","charAt","toUpperCase","slice","generateOperationId","method","path","output","path2","chunck","replace","toLowerCase","normalize_controllerName","controllerName","normalize","operationId","undefined","validOpId","getExpressVersion","oasPath"],"sources":["../../src/lib/utilsOld.js"],"sourcesContent":["//TODO:\n/*\nEn la reunión del 25 de mayo decidimos: (ver video para concretar más)\n-Todo lo que no sea alfabetico o dígito se borra para nombres de archivos tanto para archivos como para variables\n-Despues, a lo que vaya a ser variable no se le quita nada del principio y se le añade var.\n\n\nCasuística: checkear esto\n-No operationId y no x-router-controller\n-Si operationId y no x-router-controller\n-No operationId y si x-router-controller\n-Sí operationId y si x-router-controller\n-Si operationId pero erroneo\n-Project name no válido en package.json\n*/\n\n/**\n * Removes parameters from the requested path and returns the base path.\n * @param {string} reqRoutePath - Value or req.route.path (express version).\n */\nexport function getBasePath(reqRoutePath) {\n  var basePath = \"\";\n  var first = true;\n  var path_array = reqRoutePath.split(\"/\");\n  for (var i = 0; i < path_array.length; i++) {\n    //if (path_array[i].charAt(0) !== ':' && first == true && path_array[i].charAt(0) !== '') { // TODO: compare to '' or ' '?\n    if (\n      path_array[i].charAt(0) !== \":\" &&\n      first == true &&\n      path_array[i].charAt(0) !== \" \"\n    ) {\n      basePath += path_array[i];\n      first = false;\n    } else if (path_array[i].charAt(0) !== \":\") {\n      basePath +=\n        path_array[i].charAt(0).toUpperCase() +\n        path_array[i].slice(1, path_array[i].length);\n    }\n  }\n  return basePath;\n}\n\n/** TODO: para paths como /2.0/votos/{talkId}/ swagger crea 2_0votosTalkId que no es válido! qué debe hacer oas-tools?\n * Generates an operationId according to the method and path requested the same way swagger-codegen does it.\n * @param {string} method - Requested method.\n * @param {string} path - Requested path as shown in the oas doc.\n */\nexport function generateOperationId(method, path) {\n  var output = \"\";\n  var path2 = path.split(\"/\");\n  for (var i = 1; i < path2.length; i++) {\n    var chunck = path2[i].replace(/[{}]/g, \"\");\n    output += chunck.charAt(0).toUpperCase() + chunck.slice(1, chunck.length);\n  }\n  output += method.toUpperCase();\n  return output.charAt(0).toLowerCase() + output.slice(1, output.length);\n}\n\n/**\n * The generated controller name is done using the path or the router property and these can have characters which are\n * allowed for variable names. As services must be required in controller files these names must be normalized.\n * @param {string} controllerName - Name of controller, either autogenerated or specified using router property.\n */\nexport function normalize_controllerName(controllerName) {\n  return controllerName\n    .replace(/^[^a-zA-Z]*/, \"\")\n    .replace(/[^a-zA-Z0-9]*/g, \"\");\n}\n\n/**\n * OperationId can have values which are not accepted as function names. This function generates a valid name\n * @param {object} operationId - OpreationId of a given path-method pair.\n */\nexport function normalize(operationId) {\n  if (operationId == undefined) {\n    return undefined;\n  }\n  var validOpId = \"\";\n  for (var i = 0; i < operationId.length; i++) {\n    if (\n      operationId[i] == \"-\" ||\n      operationId[i] == \" \" ||\n      operationId[i] == \".\"\n    ) {\n      validOpId += operationId[i + 1].toUpperCase();\n      i += 1;\n    } else {\n      validOpId += operationId[i];\n    }\n  }\n  return validOpId;\n}\n\n/**\n * Converts a oas-doc type path into an epxress one.\n * @param {string} oasPath - Path as shown in the oas-doc.\n */\nexport function getExpressVersion(oasPath) {\n  return oasPath.replace(/{/g, \":\").replace(/}/g, \"\");\n}\n"],"mappings":"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"}